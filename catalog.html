<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Каталог товаров</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <h1>Каталог</h1>
  <a href="cart.html">Корзина</a> | <a href="admin.html">Админка</a>
  <div id="catalog"></div>

  <script>
    Promise.all([
      fetch('products.json').then(res => res.json()),
      JSON.parse(localStorage.getItem('customProducts') || '[]')
    ]).then(([products, customProducts]) => {
      const allProducts = [...products, ...customProducts];
      const container = document.getElementById('catalog');

      allProducts.forEach(p => {
        const card = document.createElement('div');
        card.innerHTML = `
          <img src="\${p.image}" alt="\${p.title}" width="150" />
          <h2>\${p.title}</h2>
          <p>\${p.price} ₽</p>
          <a href="product.html?slug=\${p.slug}">Подробнее</a>
          <button onclick="addToCart('\${p.id}')">Добавить в корзину</button>
        `;
        container.appendChild(card);
      });
    });

    function addToCart(id) {
      const cart = JSON.parse(localStorage.getItem('cart') || '{}');
      cart[id] = (cart[id] || 0) + 1;
      localStorage.setItem('cart', JSON.stringify(cart));
      alert('Добавлено в корзину');
    }
  </script>
</body>
</html>
