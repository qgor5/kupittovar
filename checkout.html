<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Оформление заказа</title>
</head>
<body>
  <h1>Оформление заказа</h1>
  <div id="order"></div>

  <script>
    const cart = JSON.parse(localStorage.getItem('cart') || '{}');

    Promise.all([
      fetch('products.json').then(res => res.json()),
      JSON.parse(localStorage.getItem('customProducts') || '[]')
    ]).then(([products, customProducts]) => {
      const allProducts = [...products, ...customProducts];
      let total = 0;
      const div = document.getElementById('order');

      Object.entries(cart).forEach(([id, qty]) => {
        const product = allProducts.find(p => p.id === id);
        if (!product) return;
        const price = product.price * qty;
        total += price;
        div.innerHTML += `<p>\${product.title}: \${qty} шт. × \${product.price} ₽</p>`;
      });

      div.innerHTML += `<h2>К оплате: \${total} ₽</h2>`;
    });
  </script>
</body>
</html>
