<!-- Блок з товаром -->
<div id="product-summary">
  <img id="product-image" src="" alt="Фото товару" />
  <div id="product-details">
    <h3 id="product-name"></h3>
    <p>Ціна за одиницю: <span id="unit-price">0</span> грн</p>
    <div id="quantity-control">
      <label for="quantity">Кількість:</label>
      <button type="button" id="decrease" aria-label="Зменшити кількість">−</button>
      <input type="number" id="quantity" name="quantity" value="1" min="1" />
      <button type="button" id="increase" aria-label="Збільшити кількість">+</button>
    </div>
    <p id="total-price">Загальна сума: 0 грн</p>
  </div>
</div>

<script>
  // Получаем параметры из URL
  function getQueryParam(param) {
    const params = new URLSearchParams(window.location.search);
    return params.get(param);
  }

  const productName = getQueryParam('productName') || "Невідомий товар";
  const productImage = getQueryParam('productImage') || "";
  const unitPrice = parseFloat(getQueryParam('price')) || 0;

  const productNameEl = document.getElementById('product-name');
  const productImageEl = document.getElementById('product-image');
  const unitPriceEl = document.getElementById('unit-price');
  const quantityInput = document.getElementById('quantity');
  const totalPriceEl = document.getElementById('total-price');

  productNameEl.textContent = productName;
  if(productImage) {
    productImageEl.src = productImage;
    productImageEl.alt = productName;
    productImageEl.style.display = 'block';
  } else {
    productImageEl.style.display = 'none';
  }
  unitPriceEl.textContent = unitPrice.toFixed(2);

  // Обновление общей суммы
  function updateTotalPrice() {
    let qty = parseInt(quantityInput.value);
    if (isNaN(qty) || qty < 1) {
      qty = 1;
      quantityInput.value = qty;
    }
    const total = qty * unitPrice;
    totalPriceEl.textContent = `Загальна сума: ${total.toFixed(2)} грн`;

    // Обновляем скрытые поля, если они есть
    const hiddenQuantity = document.getElementById('hidden-quantity');
    const hiddenTotal = document.getElementById('hidden-total');
    if(hiddenQuantity) hiddenQuantity.value = qty;
    if(hiddenTotal) hiddenTotal.value = total.toFixed(2);
  }

  quantityInput.addEventListener('input', updateTotalPrice);
  document.getElementById('increase').addEventListener('click', () => {
    quantityInput.value = parseInt(quantityInput.value) + 1;
    updateTotalPrice();
  });
  document.getElementById('decrease').addEventListener('click', () => {
    let val = parseInt(quantityInput.value);
    if (val > 1) {
      quantityInput.value = val - 1;
      updateTotalPrice();
    }
  });

  updateTotalPrice();
</script>
