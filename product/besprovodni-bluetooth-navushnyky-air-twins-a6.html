<section id="buy">
  <h2>Купити зараз</h2>

  <div class="carousel-container" aria-label="Галерея навушників Air Twins A6" style="max-width:600px; margin:20px auto; position:relative; overflow:hidden; border-radius:10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); height:400px;">
    <button class="carousel-arrow prev" aria-label="Попередній слайд" style="position:absolute;top:50%;left:10px;transform:translateY(-50%);font-size:32px;background:rgba(255,255,255,0.8);border:none;cursor:pointer;z-index:10;padding:5px 12px;border-radius:50%;">&#10094;</button>
    <div id="carousel-slide" style="display:flex;transition:transform 0.4s ease-in-out; height: 400px;">
      <img src="https://example.com/images/airtwins-a6-1.jpg" alt="Air Twins A6 - зображення 1" style="width:100%; height:400px; object-fit:cover; flex-shrink:0; border-radius:10px;">
      <img src="https://example.com/images/airtwins-a6-2.jpg" alt="Air Twins A6 - зображення 2" style="width:100%; height:400px; object-fit:cover; flex-shrink:0; border-radius:10px;">
      <!-- додай більше картинок, якщо потрібно -->
    </div>
    <button class="carousel-arrow next" aria-label="Наступний слайд" style="position:absolute;top:50%;right:10px;transform:translateY(-50%);font-size:32px;background:rgba(255,255,255,0.8);border:none;cursor:pointer;z-index:10;padding:5px 12px;border-radius:50%;">&#10095;</button>
  </div>

  <div style="display:flex; align-items:center; justify-content:center; gap:15px; margin-top: 20px; flex-wrap:wrap;">
    <span style="font-size:1.6em; font-weight:bold; color:#007acc;">899 грн</span>

    <label for="quantity" style="font-weight:bold;">Кількість:</label>
    <div style="display:flex; align-items:center; gap:5px;">
      <button type="button" id="btn-minus" aria-label="Зменшити кількість" style="font-size:1.3em; width:36px; height:36px; border:1px solid #ccc; background:#f7f7f7; border-radius:6px; cursor:pointer;">−</button>
      <input type="number" id="quantity" value="1" min="1" max="10" style="width:60px; font-size:1.2em; text-align:center; border:1px solid #ccc; border-radius:6px; padding:6px 8px;" aria-live="polite" />
      <button type="button" id="btn-plus" aria-label="Збільшити кількість" style="font-size:1.3em; width:36px; height:36px; border:1px solid #ccc; background:#f7f7f7; border-radius:6px; cursor:pointer;">+</button>
    </div>

    <a href="https://kupittovar.netlify.app/airtwins-a6" id="buyBtn" style="padding:12px 28px; background:#007acc; color:#fff; border-radius:8px; font-weight:bold; cursor:pointer; text-decoration:none;" aria-label="Купити навушники">Купити</a>
  </div>
</section>

<script>
  // Карусель
  const slide = document.getElementById('carousel-slide');
  const images = slide.querySelectorAll('img');
  const prevBtn = document.querySelector('.carousel-arrow.prev');
  const nextBtn = document.querySelector('.carousel-arrow.next');
  let currentIndex = 0;

  function showSlide(index) {
    if (index < 0) index = images.length - 1;
    if (index >= images.length) index = 0;
    slide.style.transform = `translateX(${-index * 100}%)`;
    currentIndex = index;
  }
  prevBtn.addEventListener('click', () => showSlide(currentIndex - 1));
  nextBtn.addEventListener('click', () => showSlide(currentIndex + 1));
  showSlide(0);

  // Счётчик кількості
  const qtyInput = document.getElementById('quantity');
  const btnMinus = document.getElementById('btn-minus');
  const btnPlus = document.getElementById('btn-plus');

  btnMinus.addEventListener('click', () => {
    let val = parseInt(qtyInput.value) || 1;
    if (val > 1) qtyInput.value = val - 1;
  });
  btnPlus.addEventListener('click', () => {
    let val = parseInt(qtyInput.value) || 1;
    if (val < 10) qtyInput.value = val + 1;
  });

  qtyInput.addEventListener('input', () => {
    let val = parseInt(qtyInput.value);
    if (isNaN(val) || val < 1) qtyInput.value = 1;
    else if (val > 10) qtyInput.value = 10;
  });

  // Кнопка "Купити" з передачею кількості в URL
  document.getElementById('buyBtn').addEventListener('click', function(e){
    e.preventDefault();
    const qty = qtyInput.value || 1;
    const baseUrl = this.href;
    const url = new URL(baseUrl);
    url.searchParams.set('qty', qty);
    window.location.href = url.toString();
  });
</script>
